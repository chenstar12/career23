## final å…³é”®å­—

**æœ€ç»ˆçš„ã€ä¸å¯ä¿®æ”¹çš„ï¼›ä¿®é¥°ï¼šç±»ã€æ–¹æ³•ã€å˜é‡**

1. final ç±»ï¼šä¸èƒ½è¢«ç»§æ‰¿ï¼Œç±»ä¸­æ‰€æœ‰æˆå‘˜æ–¹æ³•è¢«éšå¼æŒ‡å®šä¸º final æ–¹æ³•ï¼›

2. finalæ–¹æ³•ï¼šä¸èƒ½é‡å†™ï¼›

3. final å˜é‡ï¼šå¸¸é‡ï¼›åŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½æ›´æ”¹ï¼›å¼•ç”¨ç±»å‹ä¸èƒ½æŒ‡å‘å…¶ä»–å¯¹è±¡ã€‚

final æ–¹æ³•çš„åœºæ™¯ ï¼ˆ1ï¼‰é˜²æ­¢ç»§æ‰¿ç±»ä¿®æ”¹å…¶å«ä¹‰ï¼›ï¼ˆ2ï¼‰æ‰€æœ‰çš„ private æ–¹æ³•éƒ½éšå¼åœ°æŒ‡å®šä¸º finalã€‚

## static å…³é”®å­—

**4ç§åœºæ™¯ï¼š**

1. **æˆå‘˜å˜é‡ã€æˆå‘˜æ–¹æ³•:**  å±äºç±»ï¼Œé€šè¿‡ç±»åè°ƒç”¨ã€‚é™æ€å˜é‡è¢«ç±»çš„æ‰€æœ‰å®ä¾‹å¯¹è±¡å…±äº«ï¼›
2. **é™æ€ä»£ç å—:** æ‰§è¡Œé¡ºåº(é™æ€ä»£ç å—â€”>éé™æ€ä»£ç å—â€”>æ„é€ æ–¹æ³•)
3. **é™æ€å†…éƒ¨ç±»ï¼ˆstatic ä¿®é¥°ç±»ï¼šåªèƒ½æ˜¯å†…éƒ¨ç±»ï¼‰ï¼š** éé™æ€å†…éƒ¨ç±»ä¼šä¿å­˜ä¸€ä¸ªå¼•ç”¨æŒ‡å‘åˆ›å»ºå…¶å¤–éƒ¨ç±»ï¼Œä½†é™æ€å†…éƒ¨ç±»æ²¡æœ‰ï¼Œæ„å‘³ç€ï¼š1. ä¸ä¾èµ–å¤–éƒ¨ç±»åˆ›å»ºã€‚2. ä¸èƒ½è°ƒç”¨å¤–éƒ¨ç±»çš„é static æˆå‘˜å˜é‡/æ–¹æ³•ã€‚
4. **é™æ€å¯¼åŒ…(1.5 ä¹‹åçš„æ–°ç‰¹æ€§):** `import static` æŒ‡å®šå¯¼å…¥ç±»ä¸­çš„é™æ€èµ„æºï¼Œå¯ä»¥ç›´æ¥ç”¨é™æ€æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•(ä¸éœ€è¦ç”¨ç±»åè°ƒç”¨)

## this å…³é”®å­—

ç”¨äºå¼•ç”¨ç±»çš„å½“å‰å®ä¾‹ï¼š

```java
class Manager {
    Employees[] employees;
    void manageEmployees() {
        int totalEmp = this.employees.length;
        System.out.println("Total employees: " + totalEmp);
        this.report();
    }
    void report() { }
}
```

- this.employees.lengthï¼šå½“å‰å®ä¾‹çš„å˜é‡ã€‚
- this.reportï¼ˆï¼‰ï¼šå½“å‰å®ä¾‹çš„æ–¹æ³•ã€‚

## super å…³é”®å­—

ä»å­ç±»è®¿é—®çˆ¶ç±»çš„å˜é‡å’Œæ–¹æ³•ï¼š

```java
public class Super {
    protected int number;
    protected showNumber() {
        System.out.println("number = " + number);
    }
}
public class Sub extends Super {
    void bar() {
        super.number = 10;
        super.showNumber();
    }
}
```

**æ³¨ï¼š**

-  `super()` åœ¨æ„é€ å™¨ä¸­è°ƒç”¨æ—¶ï¼Œå¿…é¡»åœ¨é¦–è¡Œï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™ï¼›
- this è°ƒç”¨æœ¬ç±»å…¶ä»–æ„é€ æ–¹æ³•æ—¶ï¼Œä¹Ÿè¦åœ¨é¦–è¡Œã€‚
- thisã€super ä¸èƒ½ç”¨åœ¨ static æ–¹æ³•ä¸­ï¼ˆthis å’Œ super éƒ½å±äºå¯¹è±¡ï¼‰

# static å…³é”®å­—è¯¦è§£

### å¸¸ç”¨ï¼šstaticå˜é‡ã€staticæ–¹æ³•

- ç±»ä¸­æ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œé€šè¿‡ç±»åè°ƒç”¨ã€‚é™æ€å˜é‡ å­˜æ”¾åœ¨ Java å†…å­˜åŒºåŸŸçš„æ–¹æ³•åŒºï¼šæ–¹æ³•åŒºä¸ Java å †ä¸€æ ·ï¼Œå„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨JVMå·²åŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€‚

### é™æ€ä»£ç å—

å®šä¹‰åœ¨ç±»ä¸­æ–¹æ³•å¤–,ï¼›æ‰§è¡Œé¡ºåº(é™æ€ä»£ç å— â€”> éé™æ€ä»£ç å— â€”> æ„é€ æ–¹æ³•)ï¼› ä¸ç®¡åˆ›å»ºå¤šå°‘å¯¹è±¡ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼›

- æ ¼å¼ï¼š

```
static {
è¯­å¥ä½“;
}
```

### é™æ€å†…éƒ¨ç±»

é™æ€å†…éƒ¨ç±»æ²¡æœ‰å¼•ç”¨æŒ‡å‘å¤–éƒ¨ç±»ï¼Œæ„å‘³ç€ï¼šä¸ä¾èµ–å¤–éƒ¨ç±»åˆ›å»ºï¼›ä¸èƒ½ç”¨å¤–éƒ¨ç±»çš„é static æˆå‘˜å˜é‡ã€æ–¹æ³•ï¼›

- ä¾‹ï¼šé™æ€å†…éƒ¨ç±»å®ç°å•ä¾‹æ¨¡å¼

```java
public class Singleton {
    private Singleton() {    // private æ„é€ æ–¹æ³•
    }
    private static class SingletonHolder {   // privateé™æ€å†…éƒ¨ç±»ï¼šåªèƒ½åœ¨è¯¥ Singleton ç±»ä¸­è®¿é—®
        private static final Singleton INSTANCE = new Singleton();
    }
    public static Singleton getUniqueInstance() {
        return SingletonHolder.INSTANCE;
    }
}
```

- å¤–éƒ¨ç±»åŠ è½½æ—¶ï¼Œé™æ€å†…éƒ¨ç±» SingletonHolder æ²¡æœ‰åŠ è½½ã€‚è°ƒç”¨ `getUniqueInstance()`æ–¹æ³•ä»æ‰åŠ è½½ï¼Œä¸”åªå®ä¾‹åŒ–ä¸€æ¬¡ã€‚

- å¥½å¤„ï¼šå»¶è¿Ÿåˆå§‹åŒ–ï¼Œä¸”ç”± JVM æä¾›äº†å¯¹çº¿ç¨‹å®‰å…¨çš„æ”¯æŒã€‚

### é™æ€å¯¼åŒ…

æ ¼å¼ï¼šimport static

```java
import static java.lang.Math.*;
public class Demo {
  public static void main(String[] args) {
    int max = max(1,2); // max()å±äºjava.lang.Math
    System.out.println(max);
  }
}
```

## è¡¥å……

- å¦‚æœæŸæ–¹æ³•ä¸ä¾èµ–äºç±»çš„å˜é‡å’Œæ–¹æ³•ï¼Œå»ºè®®å°†æ­¤æ–¹æ³•è®¾ç½®ä¸ºé™æ€ï¼ˆç¨‹åºçš„å ç”¨ç©ºé—´æ›´å°ï¼‰ï¼›

```java
class Foo {
    int i;
    public Foo(int i) {
       this.i = i;
    }
    public static String method1() {
       return "An example string that doesn't depend on i (an instance variable)";
    }
    public int method2() {
       return this.i + 1;  //Depends on i
    }
}
```

### `static{}`é™æ€ä»£ç å—ã€`{}`éé™æ€ä»£ç å—(æ„é€ ä»£ç å—)

ç›¸åŒç‚¹ï¼š éƒ½åœ¨ JVM åŠ è½½ç±»æ—¶ä¸”åœ¨æ„é€ æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œåœ¨ç±»ä¸­éƒ½å¯ä»¥å®šä¹‰å¤šä¸ªï¼›

ä¸åŒç‚¹ï¼š æ‰§è¡Œé¡ºåº(é™æ€ä»£ç å— -> éé™æ€ä»£ç å— -> æ„é€ æ–¹æ³•)ã€‚é™æ€ä»£ç å—åªåœ¨ç¬¬ä¸€æ¬¡ new æ‰§è¡Œä¸€æ¬¡ï¼Œè€Œéé™æ€ä»£ç å—æ¯ new ä¸€æ¬¡å°±æ‰§è¡Œä¸€æ¬¡ã€‚ éé™æ€ä»£ç å—å¯åœ¨æ™®é€šæ–¹æ³•ä¸­ï¼Œè€Œé™æ€ä»£ç å—ä¸è¡Œã€‚

> **ğŸ› ä¿®æ­£** ï¼šé™æ€ä»£ç å—ä¸ä¸€å®šåªåœ¨ new æ‰§è¡Œã€‚æ¯”å¦‚ `Class.forName("ClassDemo")`åˆ›å»º Class å¯¹è±¡ä¹Ÿä¼šæ‰§è¡Œï¼›

```java
public class Test {
    public Test() {
        System.out.print("é»˜è®¤æ„é€ æ–¹æ³•ï¼--");
    }
    { //éé™æ€ä»£ç å—
        System.out.print("éé™æ€ä»£ç å—ï¼--");
    }
    static { //é™æ€ä»£ç å—
        System.out.print("é™æ€ä»£ç å—ï¼--");
    }
    private static void test() {
        System.out.print("é™æ€æ–¹æ³•! --");
        {
            System.out.print("é™æ€æ–¹æ³•ä¸­çš„ä»£ç å—ï¼--");
        }
    }
    public static void main(String[] args) {
        Test test = new Test();
        Test.test();// é™æ€ä»£ç å—ï¼--é™æ€æ–¹æ³•ä¸­çš„å†…å®¹! --é™æ€æ–¹æ³•ä¸­çš„ä»£ç å—ï¼--
    }
}
```

è¾“å‡ºï¼š

```
é™æ€ä»£ç å—ï¼--éé™æ€ä»£ç å—ï¼--é»˜è®¤æ„é€ æ–¹æ³•ï¼--é™æ€æ–¹æ³•! --é™æ€æ–¹æ³•ä¸­çš„ä»£ç å—ï¼--
```

åªæ‰§è¡Œ `Test.test();` è¾“å‡ºï¼ˆéƒ½æ˜¯staticï¼‰ï¼š

```
é™æ€ä»£ç å—ï¼--é™æ€æ–¹æ³•! --é™æ€æ–¹æ³•ä¸­çš„ä»£ç å—ï¼--
```

åªæ‰§è¡Œ `Test test = new Test();` è¾“å‡ºï¼š

```
é™æ€ä»£ç å—ï¼--éé™æ€ä»£ç å—ï¼--é»˜è®¤æ„é€ æ–¹æ³•ï¼--
```
